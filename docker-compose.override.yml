# Override за локална разработка
services:
  db:
    restart: unless-stopped
    volumes:
      - ./db/logs:/var/log/postgresql
    command: ['postgres', '-c', 'log_statement=all', '-c', 'log_connections=on', '-c', 'log_disconnections=on']

  redis:
    restart: unless-stopped
    volumes:
      - ./redis/logs:/data/logs

  auth-service:
    restart: unless-stopped
    environment:
      DEBUG: 'true'
      LOG_LEVEL: 'debug'
    volumes:
      - ./services/auth:/app
      - /app/node_modules
      - ./services/auth/logs:/app/logs

  user-service:
    restart: unless-stopped
    environment:
      DEBUG: 'true'
      LOG_LEVEL: 'debug'
    volumes:
      - ./services/user:/app
      - /app/node_modules
      - ./services/user/logs:/app/logs

  course-service:
    restart: unless-stopped
    environment:
      DEBUG: 'true'
      LOG_LEVEL: 'debug'
    volumes:
      - ./services/course:/app
      - /app/node_modules
      - ./services/course/logs:/app/logs

  test-service:
    restart: unless-stopped
    environment:
      DEBUG: 'true'
      LOG_LEVEL: 'debug'
    volumes:
      - ./services/test:/app
      - /app/node_modules
      - ./services/test/logs:/app/logs

  analytics-service:
    restart: unless-stopped
    environment:
      DEBUG: 'true'
      LOG_LEVEL: 'debug'
    volumes:
      - ./services/analytics:/app
      - /app/node_modules
      - ./services/analytics/logs:/app/logs

  ads-service:
    restart: unless-stopped
    environment:
      DEBUG: 'true'
      LOG_LEVEL: 'debug'
    volumes:
      - ./services/ads:/app
      - /app/node_modules
      - ./services/ads/logs:/app/logs

  frontend:
    restart: unless-stopped
    environment:
      NODE_ENV: development
      CHOKIDAR_USEPOLLING: 'true'
      REACT_APP_API_URL: http://localhost:8080
    volumes:
      - ./frontend:/app
      - /app/node_modules

  nginx:
    restart: unless-stopped
    volumes:
      - ./nginx/logs:/var/log/nginx
