# beelms – Product Brief (core framework)

> Бележка: Този документ описва **beelms** като продукт (рамка), а не конкретна инстанция. Конкретни
> приложения и инстанции, стъпили върху beelms core, се описват в отделни репозитории и собствени
> продуктови документи.

_Роля: Analyst / PM. Фаза: BMAD Analysis. Описва какво представлява рамката beelms и какво включва
нейният MVP от бизнес гледна точка._

## Executive Summary

beelms е opinionated рамка за изграждане на хибридни LMS системи с wiki характер. Тя дава на
software/product екипи и training организации готова основа за auth, wiki съдържание, курсове,
тестове, роли, GDPR и интеграции, така че да не изграждат всичко от нулата.

Рамката е насочена към екипи, които искат да стартират бързо собствена обучителна платформа,
поддържаща публични статии (wiki), структурирани курсове (free и paid) и базово оценяване, като
оставя UX, съдържание и бизнес модел да се дефинират във всяка конкретна инстанция.

Основният проблем, който решава beelms, е че изграждането на модерна LMS система със сигурност,
многоезично съдържание, курсове, плащания и метрики изисква много време и ресурси. Вместо всеки
проект да започва „from scratch“, beelms предоставя готов, разширяем core, който ускорява
time-to-market и намалява риска.

## 1. Цел на рамката

beelms е opinionated рамка за изграждане на **хибридни LMS системи с wiki характер**. Вместо класическа
LMS, където съдържанието живее само в затворени курсове, beelms поставя **статията / лекцията** в
центъра:

- статиите могат да бъдат публични (wiki режим) или да се виждат само през курсове (класическо LMS
  поведение);
- курсовете се изграждат като **последователности от статии и тестове**.

Целта е developer-ите да могат да вземат готова рамка (backend + по избор frontend), да я инсталират
чрез `npx create-beelms-app` и да започнат да надграждат според нуждите на своя клиент, без да решават
от нулата auth, wiki, курсове, тестове, GDPR, роли, плащания и инфраструктура.

## 2. Таргет аудитория

- **Software / product екипи** – които искат бързо да изградят собствена обучителна платформа за
  вътрешни или външни потребители.
- **Training компании и академии** – които искат да притежават своята платформа (on-prem или own
  cloud), а не да зависят от SaaS.
- **Freelance dev/consultants** – които правят LMS/обучителни решения за клиенти и искат базата да е
  готова, а не custom всеки път.

Крайните обучаеми (студенти, специалисти, ученици и др.) **не са директна таргет аудитория на
рамката** – те са потребители на конкретни инстанции/приложения, изградени върху beelms.

## 3. Проблеми, които beelms решава

- Трудно и скъпо е екипите да изграждат от нулата модерна LMS система с:
  - auth, роли, GDPR, метрики;
  - богато wiki/knowledge base съдържание;
  - курсове, тестове, платени и безплатни продукти.
- Готовите SaaS платформи често са трудни за разширяване, self-hosting или интегриране със специфични
  backend-и на клиента.
- Много проекти имат **сходни изисквания**, но днес всеки започва почти „from scratch“.

beelms адресира това като дава **готов, разширяем core**, който покрива най-честите нужди и позволява
фокус върху домейн-специфичното съдържание и UX.

## 4. Основна концепция на продукта

> „Хибридна LMS рамка: wiki + курсове + тестове, с headless backend и готов Next.js frontend.“

Ключови идеи:

- **Headless backend** (NestJS API), който може да работи самостоятелно – други frontends или мобилни
  приложения могат да се закачат към него.
- **Опционален Next.js frontend** – референтна имплементация на публичен сайт + admin панел.
- **Единен модел за съдържание**:
  - статии (wiki/лекции);
  - курсове, съставени от статии и тестове;
  - тестове/оценяване за проверка на знанието.
- **Гъвкави роли и права** – админ, регистриран потребител, гост, teacher, author, monitoring.
- **Конфигурируеми модули (feature toggles)** – wiki, курсове, auth, платени курсове, GDPR/legal и др.
- **Готови интеграционни точки** – за email, плащания, кеш, опашки и метрики.

## Success Metrics

- **По-бързо стартиране на LMS проекти** – типичен екип трябва да може да стартира работеща beelms
  инстанция (с базов wiki, курсове и auth) в рамките на дни, а не месеци или дори години, в сравнение със
  изграждане от нулата.
- **Повторна употреба на core модулите** – по-голямата част от функционалността в конкретни
  инстанции (auth, wiki, курсове, тестове, роли, интеграции) да стъпва върху готовите модули на
  beelms, вместо да се имплементира custom за всеки проект.
- **Гъвкавост на инфраструктурата** – beelms да може да работи надеждно в Lean Tier 0 сценарий
  (single VPS с Docker Compose), като същевременно поддържа включване/изключване на Redis,
  RabbitMQ, Prometheus+Grafana и Sentry според нуждите.
- **Разширяемост и поддръжка** – актуализиране на core версиите на beelms в типична инстанция да
  изисква минимални промени по потребителския код и да бъде предвидимо и документирано.

## 5. Функционален обхват

### 5.1. Пълен списък с основни функционалности

- **Auth & Users**
  - Регистрация, вход, забравена/смяна на парола.
  - Профил, изтриване/деактивиране на акаунт, експорт на лични данни (GDPR).
  - Anti-bot защити и базово rate limiting за чувствителни операции.

- **Роли и права**
  - Администратор – пълен достъп до конфигурация, съдържание, потребители, роли и интеграции.
  - Регистриран потребител – крайният обучаем.
  - Гост (нерегистриран) – вижда публичното wiki и free курсовете, но не може да се запише; за
    enrollment е нужна регистрация.
  - Teacher – създава и управлява **свои** курсове; по подразбиране не вижда курсовете на други учители
    или администратора.
  - Content Author (articles role) – създава и управлява **свои** статии; не вижда статиите на други
    автори или администратора.
  - Monitoring – вижда само агрегирани метрики и отчети, без достъп до съдържание и лични данни.

  Администраторът вижда и управлява **всички** курсове, статии и тестове, включително тези, създадени от
  учители и автори.

- **Wiki / Knowledge base**
  - Статии с markdown съдържание (вкл. code snippets и диаграми).
  - Многоезичност на статиите.
  - Публични и „затворени“ статии (видими само през курсове).

- **Курсове**
  - Курс = последователност от модули (статии, тестове, задачи).
  - Една статия може да участва в повече от един курс.
  - Курсовете се групират в **категории** (напр. „QA Basics“, „Frontend“, „Soft Skills“).
  - Курсовете могат да бъдат free или paid.
  - Регистрираните потребители могат да си „assign“-ват free курсовете към профила си.

- **Тестове / оценяване**
  - Поддръжка на базови тестове/квизове за проверка на знанията.
  - Връщане на резултат (успех/неуспех, score, feedback).

- **Feature toggles (конфигурируеми опции)**
  - Включване/изключване на публично wiki (`FT-WIKI-PUBLIC-ON/OFF`).
  - Включване/изключване на курсове (`FT-COURSES-ON/OFF`).
  - Включване/изключване на регистрация/вход за крайни потребители (`FT-AUTH-ON/OFF`).
  - Включване/изключване на платени курсове (`FT-PAID-COURSES-ON/OFF`).
  - Управление на наличните езици през admin UI (`FT-LANGUAGES-CONFIG`).
  - Включване/изключване на GDPR/Legal функционалност (`FT-GDPR-AND-LEGAL-ON/OFF`).
  - Администраторът има UI за редактиране на съдържанието на страниците „Privacy/GDPR“ и
    „Terms and Conditions“.
  - Конфигуриране дали да се използват интеграциите с Redis, RabbitMQ, Prometheus+Grafana и
    Sentry (`FT-INFRA-REDIS`, `FT-INFRA-RABBITMQ`, `FT-INFRA-MONITORING`,
    `FT-INFRA-ERROR-TRACKING`); тези опции могат да се настройват както през admin UI, така и чрез
    конфигурация, зададена при инсталация на рамката.

- **GDPR / Legal**
  - Права за достъп, изтриване, преносимост на лични данни.
  - Публични страници: Privacy/GDPR, Terms of Use, Contact, About.
  - Гъвкава поддръжка за различни юрисдикции чрез feature toggles.

- **Плащания**
  - Интеграционни точки към външни платежни системи (Stripe, PayPal и др. – конкретният избор е на
    инстанцията).
  - Модел free/paid курсове и управление на достъпа спрямо плащанията.

- **Метрики и мониторинг**
  - Базови агрегирани метрики (брой регистрирани потребители, активни курсове и др.).
  - Възможност за интеграция с Prometheus/Grafana и подобни.
  - Достъп до метриките за ролята Monitoring.

- **Техническа основа**
  - NestJS backend (REST API, JWT auth).
  - PostgreSQL база данни.
  - Redis за кеширане (sessions, кеш на често използвани справки).
  - RabbitMQ за асинхронни задачи (нотификации, дълги процеси).
  - Docker/Docker Compose за локална разработка и проста продукционна инсталация.

### 5.2. beelms core MVP (v1)

Първата версия на beelms core (v1) трябва да включва поне:

- Auth & Users с основни GDPR потоци (delete/export).
- Базови роли: администратор, регистриран потребител, гост.
- Wiki с многоезичност и публичен достъп.
- Курсове, изградени от статии (без сложен прогрес/геймификация).
- Базови тестове/квизове.
- Admin панел за:
  - управление на статии, курсове и тестове;
  - управление на потребители и роли;
  - конфигуриране на основните feature toggles;
  - редакция на GDPR/Terms съдържанието.
- Headless backend + референтен Next.js frontend.
- Базова метрика „брой регистрирани потребители“ и още няколко ключови агрегирани показатели.
 - Конфигурируеми интеграции с Redis, RabbitMQ, мониторинг (Prometheus/Grafana) и error tracking
   (Sentry), които могат да бъдат избирани още при инсталацията и по-късно управлявани през
   конфигурация и admin интерфейса.

### Out of Scope for MVP

За текущия Product Brief няма изрично декларирани функционалности извън обхвата на beelms core v1 –
всички описани в §5.1 капабилити се считат част от MVP. В бъдещи версии се очаква те да бъдат
разширявани и задълбочавани, но основните модули (auth, wiki, курсове, тестове, роли, интеграции,
инфраструктурни опции) вече са в обхвата на v1.

### Future Vision

Функционалности като по-пълна payment интеграция, по-богати метрики, по-сложни прогрес/
геймификационни модули и разширени reporting dashboards са част от дългосрочната визия за рамката.
Още в beelms core v1 се полагат основите за тях (модел за платени курсове, базови метрики,
интеграции с Redis/RabbitMQ/Prometheus+Grafana/Sentry), а бъдещите версии ще развиват тяхната дълбочина
и UX.

## 6. Нефункционални изисквания и ограничения (high-level)

### 6.1. Технологичен стек

- Backend: **NestJS** (Node.js).
- Frontend: **Next.js** (React) – опционален, но препоръчителен референтен UI.
- База данни: **PostgreSQL**.
- Контейнери: **Docker / Docker Compose** – за локална разработка и проста продукционна инсталация.
- Допълнителни технологии (по избор, според натоварването и бюджета):
  - Redis (кеш, сесии).
  - RabbitMQ (message broker).
  - Prometheus + Grafana (метрики).
  - Sentry (error tracking).

  beelms предоставя вградени интеграции и конфигурационни флагчета за всяка от тези услуги, така че
  те да могат да бъдат включвани/изключвани според нуждите на конкретната инстанция.

### 6.2. Инфраструктура и бюджет

- Минимален сценарий: една VPS машина с Docker Compose (frontend, backend, PostgreSQL и Redis в
  отделни контейнери).
- Първоначално натоварване: ниско, с възможност за скалиране чрез по-мощен план или разделяне на
  компонентите по отделни машини/услуги.
- Цел: **ниска начална цена**, без заключване към конкретен cloud доставчик.

### 6.3. Достъп без акаунт

- Публичен достъп до wiki и до списък с free курсовете.
- За enrollment в курсове, достъп до профил и персонализирани данни е необходима регистрация.

## 7. `npx create-beelms-app`

beelms се доставя като CLI инструмент:

- Команда: `npx create-beelms-app`.
- По време на инсталацията потребителят избира:
  - дали иска **само headless backend** (API-only режим) или **backend + Next.js frontend**;
  - дали иска да се добавят **примерни данни и демо съдържание** (wiki статии, примерни курсове,
    тестове) или да започне от „празна“ инсталация;
   - дали да бъдат активирани интеграциите с Redis, RabbitMQ, Prometheus+Grafana и Sentry (ако са
     избрани, се генерират съответните конфигурации и Docker услуги; ако не, рамката работи без
     тях).
- Дори ако някоя от тези интеграции не бъде избрана първоначално, по-късно тя може да бъде добавена
  чрез допълнително изпълнение на CLI стъпки или чрез включване на предоставените infra модули
  (Docker/конфигурация) и последващо активиране през конфигурация и/или admin интерфейса.
- Генерира се структурирана папка, съдържаща:
  - backend проекта;
  - по избор frontend проекта;
  - примерни `.env` файлове;
  - Docker Compose файл за локално стартиране;
  - базова тестова инфраструктура.

След scaffold-а екипът може да:

- добавя домейн-специфично съдържание и UX;
- интегрира допълнителни външни системи (CRM, BI, допълнителни платежни системи и др.);
- променя или разширява модулите на beelms според нуждите.

## 8. Връзка с инстанции и приложения, изградени върху beelms

beelms core служи за изграждане на конкретни продукти (инстанции/приложения), които:

- дефинират собствен домейн (напр. обучение, вътрешни тренинги, публични или платени курсове и др.);
- добавят свое съдържание, UX, брандинг и бизнес модел;
- могат да включват допълнителни модули и интеграции, специфични за техния контекст.

Всеки такъв продукт има:

- собствен Product Brief и PRD, които стъпват върху възможностите на beelms core;
- собствен backlog и репозитори(я), където се развиват неговите изисквания и имплементация.

Този Product Brief описва единствено **beelms core**. Конкретните приложения върху beelms трябва ясно да
декларират зависимостта си от рамката и да реферират този документ като основа.
