# WS-1 Wiki – Demo & Test Checklist

## 1. Scope и цели
- [ ] Този чеклист се отнася за WS-1 Wiki walking skeleton-а:
  - Backend: `EPIC-WS1-WIKI-BE` (NestJS API + PostgreSQL + WikiArticle/WikiArticleVersion).
  - Frontend: `EPIC-WS1-WIKI-FE` (Next.js страници `/wiki` и `/wiki/[slug]`).
- [ ] Цел: да се потвърди, че гост потребител може да:
  - [ ] види списък със статии на `/wiki`;
  - [ ] отвори конкретна статия на `/wiki/[slug]`;
  - [ ] получи ясни състояния при loading/empty/error/404.

---

## 2. Предварителни условия (Environment & Data)
- [ ] Backend средата е стартирана (NestJS API) с коректна конфигурация към PostgreSQL.
- [ ] Изпълнени са миграциите за Wiki (`WikiArticle`, `WikiArticleVersion`) според `STORY-WS1-BE-WIKI-DB-SEED`.
- [ ] Seed механизмът за Wiki е пуснат успешно и:
  - [ ] има поне една BG статия;
  - [ ] по възможност има EN версия на една статия;
  - [ ] seed-натите статии са със статус `active`.
- [ ] Frontend приложението (Next.js) е стартирано и достъпно (напр. на `http://localhost:3001`).

---

## 3. Backend – List Endpoint (`GET /api/wiki/articles`)
Източник: `STORY-WS1-BE-WIKI-LIST-ENDPOINT`

- [ ] Route/контролер:
  - [ ] Съществува конфигуриран NestJS route/контролер за `GET /api/wiki/articles`.
- [ ] Поведение при нормален случай:
  - [ ] При извикване чрез Swagger/Postman `GET /api/wiki/articles` връща `200 OK`.
  - [ ] Отговорът е JSON масив.
  - [ ] Всеки елемент съдържа поне: `id`, `slug`, език, заглавие, кратка информация (excerpt/дата на последна редакция).
  - [ ] Връщат се **само** статии със статус `active`.
  - [ ] Резултатите са подредени по разумен критерий (напр. последна редакция низходящо).
- [ ] Гранични случаи:
  - [ ] При празна база (или всички статии неактивни) endpoint-ът връща `200 OK` и **празен масив**.

---

## 4. Backend – Article Endpoint (`GET /api/wiki/articles/{slug}`)
Източник: `STORY-WS1-BE-WIKI-ARTICLE-ENDPOINT`

- [ ] Route/контролер:
  - [ ] Съществува NestJS route/контролер за `GET /api/wiki/articles/{slug}`.
- [ ] Поведение при валиден `slug` (активна статия):
  - [ ] При `GET /api/wiki/articles/{slug}` за активна статия API връща `200 OK`.
  - [ ] Отговорът е JSON обект с: заглавие, език, съдържание (body), информация за версия/последна редакция (според OpenAPI).
- [ ] Поведение при невалиден/неактивен `slug`:
  - [ ] При несъществуваща или неактивна статия се връща `404 Not Found`.
- [ ] Поведение при вътрешна грешка:
  - [ ] При симулирана вътрешна грешка (напр. временно спиране на DB) API връща 5xx код и общо съобщение за грешка.

---

## 5. Backend – DB Seed & Migrations
Източник: `STORY-WS1-BE-WIKI-DB-SEED`

- [ ] Миграции:
  - [ ] Таблиците `WikiArticle` и `WikiArticleVersion` съществуват според DB модела.
  - [ ] Миграциите се пускат успешно в чиста dev база (up/down сценарии).
- [ ] Seed данни:
  - [ ] След пускане на seed-а има поне 2–3 примерни статии.
  - [ ] Поне една статия е на BG; по възможност има EN версия на една статия.
  - [ ] Статусът на примерните статии е `active`.
  - [ ] List и article endpoint-ите реално връщат seed-натите статии.

---

## 6. Frontend – `/wiki` (Wiki List Page)
Източник: `STORY-WS1-FE-WIKI-LIST`

- [ ] Layout & навигация:
  - [ ] При отваряне на `/wiki` се вижда общият layout (header/footer) и заглавие/контекст за Wiki.
- [ ] Списък със статии:
  - [ ] На страницата има списък от статии, идващи **от API** (`GET /api/wiki/articles`).
  - [ ] За всяка статия се виждат поне: заглавие, език, кратка информация (excerpt/дата на последна редакция).
  - [ ] Показват се **само** активни статии (в синхрон с BE филтъра).
  - [ ] Статиите са подредени по разумен критерий (съответстващ на BE сортирането).
  - [ ] Клик върху статия води към `/wiki/[slug]` за съответната статия.

---

## 7. Frontend – `/wiki/[slug]` (Wiki Article Page)
Източник: `STORY-WS1-FE-WIKI-ARTICLE`

- [ ] Layout & съдържание:
  - [ ] При навигация към `/wiki/[slug]` се визуализира страница с общия layout (header/footer).
  - [ ] При валиден `slug` се показва: заглавие, език, основно съдържание (body) и мета информация (напр. последна редакция/версия).
  - [ ] Съдържанието е четимо и без излишен визуален шум, в съответствие с UX дизайна.
- [ ] Интеграция с API:
  - [ ] Страницата използва API ендпойнта `GET /api/wiki/articles/{slug}` (потвърдено чрез Network/DevTools).
- [ ] Навигация назад:
  - [ ] Наличен е ясен начин за връщане към `/wiki` (линк/бутон „Back to Wiki“ или подобно).

---

## 8. Frontend – UX състояния (loading / empty / error / 404)
Източник: `STORY-WS1-FE-WIKI-STATES`

### 8.1 `/wiki`
- [ ] **Loading**:
  - [ ] При забавен отговор от API се показва индикатор/съобщение за зареждане.
- [ ] **Empty**:
  - [ ] При `200 OK` и празен списък се показва човешко съобщение (напр. „Все още няма публикувани статии“).
- [ ] **Error**:
  - [ ] При симулирана грешка от API (5xx/Network error) се показва ясно съобщение за грешка (напр. „Възникна проблем при зареждане на статиите. Опитайте отново по-късно.“).

### 8.2 `/wiki/[slug]`
- [ ] **Loading**:
  - [ ] При забавен отговор от API за статията се показва индикатор/съобщение за зареждане.
- [ ] **Error** (5xx):
  - [ ] При симулирана обща грешка (5xx/Network error) се показва общо съобщение за грешка.
- [ ] **404 / Not found**:
  - [ ] При невалиден `slug` (API връща `404`) се показва специфична 404/Not found страница/състояние, в синхрон с FLOW-WIKI-NOT-FOUND.
  - [ ] Има опция за връщане към `/wiki`.
- [ ] Текстовете на съобщенията са на правилния език (BG/основен език на интерфейса) и съответстват на tone-of-voice от продукта.

---

## 9. Тестове и дефекти
- [ ] За ключовите части са налични поне базови автотестове:
  - [ ] BE unit/integration тестове за WikiService/WikiController (list + article endpoints).
  - [ ] FE тестове или ясен мануален чеклист за `/wiki`, `/wiki/[slug]` и UX състоянията.
- [ ] Всички P0/P1 дефекти, свързани с WS-1 Wiki BE/FE, са затворени преди демото.

---

## 10. Demo сценарий (high-level)
- [ ] Показване на `/wiki` със seed-нати статии.
- [ ] Навигация към конкретна статия `/wiki/[slug]` и преглед на съдържанието.
- [ ] Демонстрация на поне едно loading и едно error състояние (може с временно симулиран проблем).
- [ ] Демонстрация на 404 поведение при невалиден `slug`.
- [ ] Кратко обяснение как Wiki частта стъпва на BE/DB и как ще се развива след WS-1.
