# Стратегия за тестване

Този документ описва стратегиите, методологиите и инструментите, използвани за гарантиране на високо качество и надеждност на интерактивната онлайн система за самостоятелно обучение.

## Съдържание
1. [Обзор](#обзор)
2. [Нива на тестване](#нива-на-тестване)
3. [Видове тестове](#видове-тестове)
4. [Инструменти за тестване](#инструменти-за-тестване)
5. [Тестване на микросервисите](#тестване-на-микросервисите)
6. [Автоматизация на тестовете](#автоматизация-на-тестовете)
7. [Метрики за качество](#метрики-за-качество)
8. [Управление на тестовите данни](#управление-на-тестовите-данни)
9. [Тестване на сигурността](#тестване-на-сигурността)

## Обзор

Стратегията за тестване на проекта е базирана на принципа "осигуряване на качество чрез непрекъснато тестване". Това включва превантивно тестване, ранно откриване на дефекти и интеграция на тестови практики във всички фази на разработката.

### Цели на тестовата стратегия
- Осигуряване на надеждност на системата
- Ранно откриване на дефекти
- Минимизиране на техническия дълг
- Поддръжка на бърза итерация на разработката
- Потвърждение на съответствие с функционалните и нефункционалните изисквания

## Нива на тестване

### Модулно (Unit) тестване
- Тестване на най-малките тестируеми части от кода (функции, методи, класове)
- Фокус върху изолирано поведение с минимални зависимости
- Покритие на кода от минимум 80% за всички бизнес функционалности

### Интеграционно тестване
- Тестване на взаимодействието между компонентите или микросервисите
- Фокус върху интерфейсите между компонентите
- Тестване на взаимодействието с външни зависимости (база данни, APIs)

### Системно тестване
- End-to-end тестване на цялата система
- Тестване на цели потребителски сценарии
- Проверка на функционални и нефункционални изисквания

### Приемно тестване
- Тестване от гледна точка на крайния потребител
- Валидиране на бизнес изискванията
- Тестване на потребителското изживяване

## Видове тестове

### Функционални тестове
- **API тестове** - Валидация на REST API endpoints
- **UI тестове** - Проверка на потребителския интерфейс и взаимодействията
- **Регресионни тестове** - Автоматизирани тестове на съществуващи функционалности

### Нефункционални тестове
- **Производителност** - Тестване на скоростта, времето за отговор и мащабируемостта
- **Натоварване** - Валидация на поведението при висок трафик
- **Сигурност** - Тестване за уязвимости и съответствие със стандартите за сигурност
- **Достъпност** - Тестване за съответствие с WCAG стандартите
- **Съвместимост** - Тестване на различни браузъри и устройства

### Специализирани тестове
- **Тестване на микросервиси** - Поведение на изолирани микросервиси
- **Contract тестове** - Тестване на договорите между микросервисите
- **Chaos тестове** - Устойчивост на системата при непредвидени ситуации

## Инструменти за тестване

### Frontend тестване
- **Jest** - За unit тестване на JavaScript/TypeScript код
- **React Testing Library** - За компонентно тестване
- **Cypress** - За E2E тестване на потребителския интерфейс
- **Lighthouse** - За тестване на производителност и достъпност

### Backend тестване
- **Jest** - За unit и интеграционно тестване на NestJS код
- **Supertest** - За API тестване
- **Pactum** - За contract тестване между микросервиси
- **TypeORM тестинг модули** - За тестване на взаимодействия с базата данни

### End-to-end тестване
- **Playwright** - За автоматизирано E2E тестване и кросбраузър тестване
- **k6** - За натоварвателно тестване

### Инструменти за мониторинг и анализ
- **Сentry** - За мониторинг на грешки в реално време
- **Istanbul** - За анализ на покритието на кода
- **Grafana** - За визуализация на метрики от тестовете
- **ELK Stack** - За анализ на логове от тестовете

## Тестване на микросервисите

### Auth Service
- Unit тестове за валидация на JWT токени
- Интеграционни тестове за регистрация и вписване
- Тестове за сигурност на пароли и сесии
- Производителност при много паралелни заявки

### User Service
- Тестване на CRUD операции за потребители
- Валидация на ролеви достъпи
- Тестове за потребителски настройки
- Интеграционни тестове с Auth Service

### Course Service
- Тестване на управлението на курсове и съдържание
- Валидация на версиониране на съдържание
- Тестове за проследяване на прогрес
- Производителност при зареждане на курсове

### Test Service
- Валидация на различни типове въпроси
- Тестове за автоматично оценяване
- Интеграционни тестове с Course Service
- Производителност при много паралелни тестови опити

### Analytics Service
- Валидация на анализи и отчети
- Тестове за експорт на данни
- Производителност при обработка на големи обеми данни

### Ads Service
- Тестове за управление на реклами
- Валидация на anti-adblocker механизми
- Тестове за криптиране на чувствителни данни
- Интеграционни тестове за проследяване на импресии и кликове

## Автоматизация на тестовете

### CI/CD интеграция
- Изпълнение на unit тестове при всеки commit
- Интеграционни тестове при PR към development клона
- E2E тестове при PR към main/master клона
- Ежедневно пълно регресионно тестване на development среда

### Тестови среди
- **Development** - За бързо тестване по време на разработката
- **Staging** - За тестване преди production deploy
- **Production** - За минимални smoke тестове след deploy

### Автоматизирани тестови suite-ове
- **Smoke тестове** - Базово тестване на критични функционалности
- **Санитарни тестове** - Разширено тестване на основни функционалности
- **Регресионни тестове** - Пълно тестване на съществуващи функционалности
- **Performance тестове** - Натоварвателно тестване на critical paths

## Метрики за качество

### Покритие на кода
- Минимум 80% покритие на кода от unit тестове
- 100% покритие на критичните бизнес функционалности
- Фокус върху качеството на тестовете, не само количествените метрики

### Метрики за дефекти
- Брой открити дефекти по категория и приоритет
- Среден живот на дефект (от откриване до поправяне)
- Повторни дефекти и root cause анализ
- Defect density (съотношение между брой дефекти и размер на кода)

### Тестово покритие
- Покритие на user stories и acceptance критерии
- Покритие на APIs и интерфейси
- Покритие на потребителски сценарии

### Производителност
- Време за отговор (response time)
- Брой транзакции за секунда
- Използване на ресурси (CPU, памет)
- Мащабируемост при увеличаващ се трафик

## Управление на тестовите данни

### Подходи за тестови данни
- Генериране на тестови данни по време на тестване
- Използване на предварително подготвени тестови набори
- Анонимизирани реални данни за специфични сценарии

### Стратегии за управление на данни
- Изолирани тестови среди за всеки тест run
- Автоматично почистване на тестови данни след изпълнение
- Версиониране на тестови набори от данни
- Използване на Docker контейнери за изолирани тестови бази данни

## Тестване на сигурността

### Видове тестове за сигурност
- **OWASP Top 10** - Тестване за най-често срещаните уязвимости
- **Penetration тестове** - Симулирани атаки за откриване на уязвимости
- **API Security тестване** - Проверка за правилна автентикация и оторизация
- **Тестване на сигурността на данните** - Валидация на криптиране и защита на чувствителни данни

### Инструменти за тестване на сигурността
- **OWASP ZAP** - За автоматизирано откриване на уязвимости
- **SonarQube** - За статичен анализ на сигурността на кода
- **npm audit / snyk** - За откриване на уязвимости в зависимостите

## Процес на тестване

### Фази на тестовия процес
1. **Планиране** - Определяне на обхвата и стратегията за тестване
2. **Дизайн** - Създаване на тестови случаи и сценарии
3. **Подготовка** - Настройка на тестови среди и данни
4. **Изпълнение** - Провеждане на тестовете и запис на резултатите
5. **Анализ** - Оценка на резултатите и докладване на дефекти
6. **Повторно тестване** - Верификация на поправените дефекти

### Документация за тестването
- Тестови планове за всяка итерация
- Детайлни тестови случаи за критични функционалности
- Регресионни тестови списъци
- Докладване на дефекти с ясни стъпки за възпроизвеждане

### Отговорности за тестването
- Разработчици - Отговорни за unit тестовете и базови интеграционни тестове
- QA специалисти - Отговорни за E2E, системно и приемно тестване
- DevOps - Отговорни за тестване на инфраструктурата и CI/CD процеса
- Всички - Споделена отговорност за цялостното качество

---

Тази стратегия за тестване е жив документ и ще се актуализира при промени в технологичния стак, архитектурата или бизнес изискванията на системата.
