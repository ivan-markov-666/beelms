# QA4Free – API & DB документация (index)\n\nТози документ е входна точка за техническата документация на BE/API и модела на базата данни.\n\n## 1. OpenAPI спецификация\n\n- `docs/architecture/openapi.yaml` – основният източник на истина за:\n  - Auth, Account (`/auth/...`, `/users/me`);\n  - Wiki (public и Admin Wiki);\n  - Admin Metrics (`/admin/metrics/overview`);\n  - Practical/Training API (`/training/...`).\n\nПрепоръка: при промяна по API първо се обновява **OpenAPI**, после BE/FE и примерните документи.\n\n## 2. Модел на базата данни\n\n- `docs/architecture/db-model.md` – концептуален ER модел (Mermaid) и описания на ентитетите:\n  - `User`, `WikiArticle`, `WikiArticleVersion`, `Task`, `TaskResult`, `GdprRequest`.\n  - §3.2.1 описва как Admin Wiki потоците (list/create/update/status/versions/rollback) работят върху `WIKI_ARTICLE` и `WIKI_ARTICLE_VERSION`.\n\n## 3. Admin Wiki\n\n- **API спецификация:**\n  - OpenAPI – секция **Admin Wiki (CRUD + версии)** в `openapi.yaml`.\n- **Примерни заявки:**\n  - `docs/architecture/admin-wiki-api-examples.md` – `curl` + JSON примери за:\n    - `GET /api/admin/wiki/articles` (list),\n    - `POST /api/admin/wiki/articles` (create, multi-language),\n    - `PUT /api/admin/wiki/articles/{id}` (edit + нова версия),\n    - `PATCH /api/admin/wiki/articles/{id}/status` (Activate/Deactivate),\n    - `GET /api/admin/wiki/articles/{id}/versions`,\n    - `POST /api/admin/wiki/articles/{id}/versions/{versionId}/restore`.\n- **Свързани BE файлове:**\n  - `be/src/wiki/wiki.service.ts` – бизнес логика;\n  - `be/src/wiki/admin-wiki.controller.ts` – Admin Wiki endpoint-и;\n  - `be/src/wiki/dto/*.ts` – DTO-та за list/detail/create/update/versions.\n\n## 4. Admin Metrics\n\n- **API спецификация:**\n  - OpenAPI – секция **Admin / Metrics (MVP ниво)** в `openapi.yaml` (`/admin/metrics/overview`).\n- **Примерни заявки:**\n  - `docs/architecture/admin-metrics-api-examples.md` – `curl` пример + обяснение на полето `usersChangePercentSinceLastMonth`.\n- **Свързани BE файлове:**\n  - `be/src/auth/admin-metrics.service.ts` – изчисление на метриките;\n  - `be/src/auth/admin-metrics.controller.ts` – endpoint `GET /admin/metrics/overview`.\n\n## 5. Auth & Account\n\n- **API спецификация:**\n  - OpenAPI – секция **Auth Service** + `/users/me` в `openapi.yaml`.\n- **Примерни заявки:**\n  - `docs/architecture/auth-api-examples.md` –\n    - `POST /auth/register`,\n    - `POST /auth/login`,\n    - `GET /users/me`,\n    - `POST /auth/forgot-password`,\n    - `POST /auth/reset-password`,\n    - `POST /auth/verify-email`.\n- **Свързани BE файлове:**\n  - `be/src/auth/*.ts` – NestJS Auth module, guards, DTO-та.\n\n## 6. Training API (Practical environment)\n\n- **API спецификация:**\n  - OpenAPI – Training секция в `openapi.yaml`.\n- **Примерни заявки:**\n  - `docs/architecture/training-api-examples.md` – примери за:\n    - `GET /training/ping`,\n    - `POST /training/echo` с различни стойности на `value`.\n- **Свързани BE файлове:**\n  - `training-api/src/*.ts` – NestJS приложение за Training API.\n\n## 7. Насоки за поддръжка\n\nКогато добавяте нови API-та или разширявате съществуващи:\n\n1. Обновете `openapi.yaml` (schemas + paths).\n2. Обновете съответните BE/FE имплементации.\n3. Ако endpoint-ът е важен за упражнения или за Admin UI, добавете или актуализирайте примерните документи в `docs/architecture/*-api-examples.md`.\n4. При промяна по модела на данните – синхронизирайте `db-model.md` (ER диаграмата и описанията).\n
