# STORY-MVP-CROSS-I18N-FE-FOUNDATION – Основи на мултиезичността във FE (BG/EN)

Status: Draft

_Забележка: Това story **не е част от WS-1**, а от `EPIC-CROSS-I18N` (и частично `EPIC-WIKI-PUBLIC`) като MVP разширение на мултиезичността в публичния интерфейс._

## Summary
Като **гост** искам когато сменя езика от глобалния language switcher в header-а, не само Wiki съдържанието, но и основните елементи на интерфейса (навигация, заглавия в layout shell) да се показват на избрания език (BG/EN), за да имам последователно преживяване в целия сайт.

## Links to BMAD artifacts
- PRD – `docs/product/prd.md` §4.7 FR-CROSS-1 „Поддръжка на поне два езика в интерфейса (BG/EN)“.
- MVP feature list – `docs/architecture/mvp-feature-list.md` §6.1 „Мултиезичност“.
- UX Design – `docs/ux/qa4free-ux-design.md` §2.1–2.2 (глобален header language switcher, основен layout shell).
- User Flows – `docs/ux/flows/qa4free-user-flows.md` (FLOW-WIKI-BROWSE – смяна на езика през header-а).
- MCP EPIC Map – `docs/backlog/MCP-EPIC-map.md` (`EPIC-CROSS-I18N` – мултиезичност в интерфейса и съдържанието).
- Tech spec – `docs/architecture/epic-cross-i18n.md` (mini tech-spec за глобално поведение на езика).

## Acceptance Criteria
- Глобалният `LanguageSwitcher` в header-а:
  - остава единственото място за избор на език (BG/EN) в публичния интерфейс;
  - продължава да контролира `lang` query параметъра в URL (`?lang=bg|en`) по настоящия начин, без да чупи WS-1 Wiki flow.
- Във FE има базова i18n инфраструктура:
  - дефиниран е централен тип `SupportedLang = "bg" | "en"` и helper `normalizeLang`, споделен между `LanguageSwitcher` и други компоненти;
  - има централизирани речници с преводими стрингове за ключови UI елементи (навигация, основни заглавия, общи бутони) на BG/EN;
  - има прост helper (напр. `t(lang, key)` или еквивалент), чрез който компонентите вземат преводим текст според текущия език.
- Основният публичен layout shell и навигацията:
  - показват надписи (например „Wiki“, „Практика“, „Вход“ или аналогични) на избрания от header-а език;
  - при смяна на езика през `LanguageSwitcher` (BG ↔ EN) се визуализират правилните преводи след презареждане/навигация, без промяна на бизнес логиката.
- Поведение при липсващ превод:
  - ако за даден ключ липсва превод за избрания език, се използва стойността за default езика (`bg`), без да се показват технически съобщения към крайния потребител;
  - такива случаи се третират като dev дефект и могат да се хващат в тестове/code review.
- Wiki списъкът и статиите запазват вече имплементираното поведение спрямо `STORY-MVP-WIKI-LANGUAGE-SWITCH` (включително 404 при липсваща езикова версия за статия).

## Dev Tasks
- [ ] **Frontend – I18n foundation**
  - [ ] Въвеждане на централен i18n конфиг (напр. `src/i18n/config.ts`) със:
    - `SUPPORTED_LANGS = ["bg", "en"] as const;`
    - `SupportedLang` тип;
    - `DEFAULT_LANG` и функция `normalizeLang(raw): SupportedLang`.
  - [ ] Добавяне на централен речник с преводими стрингове (напр. `src/i18n/messages.ts`), разделен по домейни (`nav`, `auth`, `wiki`, `common` и др.).
  - [ ] Имплементиране на малък helper за превод (напр. `t(lang, key)` или типизиран еквивалент) и/или hook `useCurrentLang()` за client компоненти.
- [ ] **Frontend – прилагане към layout/nav**
  - [ ] Адаптиране на основния публичен layout shell и навигацията да използват i18n речниците вместо твърди BG стрингове.
  - [ ] Осигуряване, че при различни стойности на `?lang=` (BG/EN) навигацията показва коректните преводи.
- [ ] **Тестове**
  - [ ] Unit тестове за `normalizeLang` и за i18n helper-а (`t`/`useCurrentLang`).
  - [ ] Поне един FE тест (или snapshot тест), който проверява, че при `lang=bg`/`lang=en` навигацията показва различни надписи според речниците.

## Notes
- Това story стъпва върху вече имплементираното `STORY-MVP-WIKI-LANGUAGE-SWITCH` (глобален language switcher + Wiki поведение) и **разширява ефекта на избрания език върху общия UI**, без да променя backend API-та.
- Необходими са координация и UX review, за да се уточни точният набор от елементи в layout/nav, които трябва да са преводими в рамките на MVP.
- Препоръчително планиране:
  - да се изпълни **след формалното приключване на WS-1** (walking skeleton за Wiki), като част от първата wave от EPIC-CROSS-I18N за MVP;
  - може да бъде комбинирано с ранни Auth/Practice екрани, за да има достатъчно UI, върху който мултиезичността да е видима.
