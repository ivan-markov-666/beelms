# STORY-WS2-FE-AUTH-PROFILE-ACCOUNT – UI за профил, изтриване и експорт на акаунт

Status: Draft

## Summary
Като **регистриран потребител** искам да имам **екран „Моят профил“**, където мога да видя основна информация за акаунта си, да го изтрия и да заявя експорт на личните си данни, за да упражнявам правата си по GDPR.

## Links to BMAD artifacts
- PRD – `docs/product/prd.md` (§4.2 FR-AUTH-4..6, §4.7 FR-CROSS-2).
- MVP Feature List – `docs/architecture/mvp-feature-list.md` (§2.4 Профил и управление на акаунта).
- UX Design – `docs/ux/qa4free-ux-design.md` (екран „Моят профил“ и GDPR flows).
- User Flows – `docs/ux/flows/qa4free-user-flows.md` (flows за account delete и data export).
- System Architecture – `docs/architecture/system-architecture.md` (GDPR, Auth, frontend навигация).
- MCP EPIC Map – `docs/backlog/MCP-EPIC-map.md` (EPIC-AUTH-ACCOUNTS, EPIC-CROSS-GDPR-LEGAL).

## Acceptance Criteria
- Страница `/profile`:
  - Достъпна е само за вписани потребители; при липсващ/невалиден токен потребителят се пренасочва към `/auth/login`.
  - Показва основна профилна информация (имейл, дата на регистрация и др. според PRD).
  - Предоставя ясно достъпно действие "Изход" (logout), което изчиства локалното Auth състояние (JWT/сесия) и връща потребителя към подходящ публичен екран (напр. начална страница или Wiki), без да изисква отделен backend logout endpoint.
- Изтриване на акаунт:
  - На страницата има ясно обозначено действие за закриване/изтриване на акаунта.
  - UX реализира **двустепенно потвърждение** (два диалога/стъпки преди окончателно изтриване), в съответствие с PRD.
  - При потвърдено изтриване се вика `DELETE /api/users/me` и при успех потребителят се изписва и получава подходящо съобщение.
- Експорт на лични данни:
  - На страницата има действие „Експорт на лични данни“.
  - При заявка се вика `POST /api/users/me/export` (с нужните защити – напр. reCAPTCHA, ако UX/BE го изискват).
  - След успех потребителят може да свали файл или да получи ясна индикация за готовност на данните, според договореното API поведение.
- Общи UX изисквания:
  - Съобщенията за изтриване/експорт са ясни по отношение на последствията (без връщане след delete).
  - Екранът използва общ layout и UI компоненти и е в тон с останалия интерфейс.

## Dev Tasks
- [ ] Имплементиране на страница `/profile` с извличане и визуализиране на данните от `GET /api/users/me`.
- [ ] Имплементиране на двустепенно потвърждение за изтриване на акаунта и интеграция с `DELETE /api/users/me`.
- [ ] Имплементиране на UI за заявка за експорт на данни и интеграция с `POST /api/users/me/export`.
- [ ] Guard-ване/redirect логика, така че неавторизирани потребители да не достъпват `/profile`.
- [ ] Имплементиране на logout действие (бутон/линк), което изтрива локалните токени/сесия и пренасочва потребителя към публичен екран, в синхрон с `EPIC-WS2-AUTH-FE`.
- [ ] Ръчно тестване на основните сценарии (view profile, delete account, export data).
- [ ] (по избор) FE тестове за профилния екран и критичните действия.

## Notes
- Тази story стъпва директно върху `STORY-WS2-BE-AUTH-PROFILE-ACCOUNT` и трябва да следи неговите API договори и GDPR изисквания.
- Важно е UX текстовете да са внимателно формулирани за GDPR (особено при изтриване и експорт на данни).
- В бъдещи WS може да се разшири екранът с допълнителни настройки (езикови предпочитания, нотификации и др.), но за WS-2 целта е минимален, но пълен GDPR/профил skeleton.
